{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Make the jigsaw puzzle playable and update puzzle text to â€œLove you akka ğŸ’–â€",
  "requirements": [
    {
      "id": "REQ-18",
      "summary": "Replace the jigsaw puzzleâ€™s rendered internal text with exactly â€œLove you akka ğŸ’–â€ and remove any â€œSushmaâ€ occurrences from puzzle/game output.",
      "acceptanceCriteria": [
        "The puzzle visual text rendered inside the jigsaw uses exactly: â€œLove you akka ğŸ’–â€.",
        "The string â€œSushmaâ€ does not appear anywhere in the puzzle/game UI or code-driven rendered output."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/JigsawPuzzleName.tsx",
          "operation": "modify",
          "description": "Update the PUZZLE_TEXT constant (and any other puzzle-rendered text sources if present) so the canvas-rendered puzzle text is exactly â€œLove you akka ğŸ’–â€. Ensure â€œSushmaâ€ is fully removed from this component so it cannot appear in code-driven rendered output."
        }
      ]
    },
    {
      "id": "REQ-19",
      "summary": "Fix puzzle input handling to support reliable pick/drag/drop on both desktop and touch devices and prevent page scroll during interaction.",
      "acceptanceCriteria": [
        "On desktop: clicking/tapping a piece starts dragging it; moving the pointer moves the piece; releasing drops it and ends dragging.",
        "On mobile/touch: touch drag works equivalently (no dependency on mouse-only events).",
        "Dragging does not scroll the page while interacting with the canvas/puzzle area.",
        "Dropping a piece near its correct slot snaps it into place as before.",
        "Users can complete the puzzle end-to-end without getting stuck due to missing/failed input handling."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/JigsawPuzzleName.tsx",
          "operation": "modify",
          "description": "Replace mouse-only handlers with Pointer Events (onPointerDown/onPointerMove/onPointerUp/onPointerCancel) and implement pointer capture so dragging continues reliably even if the pointer leaves the canvas. Ensure interaction prevents default scrolling/gestures during drag (keep/strengthen touchAction: 'none' and call preventDefault where appropriate). Preserve existing snapping behavior and visual feedback while improving robustness on touch devices."
        }
      ]
    },
    {
      "id": "REQ-20",
      "summary": "Preserve the existing post-completion behavior and Valentine message reveal content while keeping completion triggering reliable after input fixes.",
      "acceptanceCriteria": [
        "When the puzzle becomes fully completed, the completion callback fires and the message reveal section displays as it does currently.",
        "The revealed Valentine message text remains exactly as currently implemented in the message reveal component (no edits to that message content)."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/PuzzleRevealSection.tsx",
          "operation": "modify",
          "description": "Add a lightweight guard so the completion handler is only processed once per puzzle completion (to avoid duplicate triggers from input event sequencing changes). Do not change any revealed Valentine message copy; only ensure the existing reveal flow remains identical and stable."
        },
        {
          "path": "frontend/src/components/ValentineMessageReveal.tsx",
          "operation": "modify",
          "description": "Verify (and keep) the Valentine message reveal text exactly as-is; apply no copy changes. If any refactor is needed for compatibility with the puzzle completion guard, it must be non-functional and not alter displayed text."
        }
      ]
    }
  ]
}